<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poorhub Commands</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="static/ghostCursor.js"></script>
   
</head>
<body>
    <a href="index.html" class="poorhub-link">Poorhub</a>
    <h1>Commands</h1>

    <div class="navigation-container">
        <button id="prev-button" style="display: none;">←</button> <!-- Initially hidden -->
        <div id="buttons-container">
            <div id="buttons"></div>
            <button id="next-button" style="display: none;">→</button> <!-- Initially hidden -->
        </div>
    </div>
    
    <div id="command-container" class="command-container"></div>
    <div id="backToTop" onclick="scrollToTop()"></div>

    <!-- Next button -->
    <button id="next-button" style="display: none;" class="category-button">Next Category</button>

    <!-- Popup notification -->
    <div class="popup" id="copyPopup">Command Copied</div>

    <script src="script.js"></script>

    <script>
        const dots = [];
      const cursor = {
        x: 0,
        y: 0,
      };

      for (let i = 0; i < 40; i++) {
        const dot = document.createElement("div");
        dot.className = "dot";
        document.body.appendChild(dot);
        dots.push(dot);
      }

      document.addEventListener("mousemove", (e) => {
        cursor.x = e.clientX;
        cursor.y = e.clientY;
      });

      function draw() {
        let x = cursor.x;
        let y = cursor.y;

        dots.forEach((dot, index) => {
          const nextDot = dots[index + 1] || dots[0];

          dot.style.left = x + "px";
          dot.style.top = y + "px";

          x += (nextDot.offsetLeft - dot.offsetLeft) * 0.5;
          y += (nextDot.offsetTop - dot.offsetTop) * 0.5;
        });
      }

      setInterval(draw, 10); 
        let allCommands = {};
        let currentCategoryIndex = 0;
        const categoriesPerPage = 5; // Number of categories to display per page

        // Fetch commands from the JSON file
        fetch('commands.json')
            .then(response => response.json())
            .then(data => {
                categorizeCommands(data); // Categorize commands
                updateButtons();
                const categories = Object.keys(allCommands);
            if (categories.length > 0) {
                showCommands(categories[0]); // Display commands for the first category
            }// Call the function to display buttons
            });

        // Function to categorize commands by category
        function categorizeCommands(commands) {
            allCommands = {};
            commands.forEach(command => {
                const category = command.category;
                if (!allCommands[category]) {
                    allCommands[category] = [];
                }
                allCommands[category].push(command);
            });
        }

        // Function to update the category buttons
        function updateButtons() {
            const buttonsContainer = document.getElementById('buttons');
            buttonsContainer.innerHTML = ''; // Clear existing buttons
            const categories = Object.keys(allCommands); // Get unique categories
            const totalCategories = categories.length;

            // Calculate the end index for the current categories
            const endIndex = Math.min(currentCategoryIndex + categoriesPerPage, totalCategories);

            // Loop through the categories and create buttons for the current page
            for (let i = currentCategoryIndex; i < endIndex; i++) {
                const category = categories[i];
                const button = document.createElement('button');
                button.className = 'category-button';
                button.innerHTML = category.charAt(0).toUpperCase() + category.slice(1); // Capitalize the first letter
                button.onclick = () => showCommands(category); // Attach click event
                buttonsContainer.appendChild(button);
            }

            // Show or hide navigation buttons
            document.querySelector('.navigation-container').style.display = 'flex';
            document.getElementById('prev-button').style.display = currentCategoryIndex > 0 ? 'inline' : 'none'; // Show if not on the first page
            document.getElementById('next-button').style.display = endIndex < totalCategories ? 'inline' : 'none'; // Show if there are more categories
        }


        // Function to show commands for a selected category
        function showCommands(category) {
            const commandContainer = document.getElementById('command-container');
            commandContainer.innerHTML = ''; // Clear previous commands

            const commands = allCommands[category]; // Get commands for the selected category
            commands.forEach(command => {
                const commandCard = document.createElement('div');
                commandCard.className = 'command';
                commandCard.innerHTML = `
                    <strong>${command.name}</strong> - ${command.description} 
                    <br><em>Usage: ${command.usage}</em>
                    <br><em>Permissions: ${command.permissions}</em>
                    <svg class="copy-icon" onclick="copyCommand('${command.name}')" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M10 2H6c-1.1 0-2 .9-2 2v4h2V4h4V2zm1 0v2h4v2h2V4c0-1.1-.9-2-2-2h-4zm7 4v2h-4v2h4v2h-4v2h4c1.1 0 2-.9 2-2V6h-2zM4 6v4c0 1.1.9 2 2 2h2v-2H6V6H4zm-1 8v2h2v-2H3zm5 2h2v-2H8v2zm8-2v-2h-4v2h4zm-8-8h4V6H8v2z"/>
                    </svg>
                `;
                commandContainer.appendChild(commandCard);
            });
        }

        // Function to copy command to clipboard
        function copyCommand(command) {
            navigator.clipboard.writeText(command).then(() => {
                const popup = document.getElementById('copyPopup');
                popup.style.display = 'block';
                setTimeout(() => { popup.style.display = 'none'; }, 1500); // Hide after 1.5 seconds
            });
        }

        // Next button click event
        document.getElementById('next-button').onclick = () => {
            const totalCategories = Object.keys(allCommands).length;
            currentCategoryIndex += categoriesPerPage; // Move to the next set of categories
            if (currentCategoryIndex >= totalCategories) {
                currentCategoryIndex = totalCategories - categoriesPerPage; // Reset to last categories
            }
            updateButtons(); // Update the buttons display
        };
        document.getElementById('prev-button').onclick = () => {
            currentCategoryIndex -= categoriesPerPage; // Move to the previous set of categories
            if (currentCategoryIndex < 0) {
                currentCategoryIndex = 0; // Prevent going to negative index
            }
            updateButtons(); // Update the buttons display
        };
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Show the back to top button on scroll
        window.onscroll = function() {
            const backToTopButton = document.getElementById('backToTop');
            if (document.body.scrollTop > window.innerHeight / 2 || document.documentElement.scrollTop > window.innerHeight / 2) {
                backToTopButton.classList.add('show'); // Show button
            } else {
                backToTopButton.classList.remove('show'); // Hide button
            }
        };
        ghostCursor.init();
    </script>
</body>
</html>
